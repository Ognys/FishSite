@page
@model AddNewsModel
@{
    ViewData["Title"] = "Добавить новость";
}


<div class="addnews-nome home-admin">
    <form method="post" id="newsForm" class="addnews-form login-form" enctype="multipart/form-data">
        <div class="addnews-form-title home-admin-interface-atributeone add-form-name">
            <label asp-for="News.Title">Название</label>
            <input asp-for="News.Title" type="text">
            <span asp-validation-for="News.Title"></span>
        </div>
        <div class="addnews-form-desc home-admin-interface-atributetwo add-form-desc">
            <label asp-for="News.Description">Описание</label>
            <div id="toolbar">
                <button class="ql-bold"></button>
                <button class="ql-italic"></button>
                <button class="ql-underline"></button>
                <button class="ql-list" value="ordered"></button>
                <button class="ql-list" value="bullet"></button>
                <button class="ql-link"></button>
                <button class="ql-clean"></button>
            </div>

            <div id="editor" style="width: 600px; height: 250px; border-style: solid; resize: none;"></div>
            <input type="hidden" asp-for="News.Description" id="descHidden" />
            <span asp-validation-for="News.Description"></span>
        </div>
        <div class="addnews-form-img add-form-upload">
            <label asp-for="Upload">Изображения</label>
            <input asp-for="Upload" type="file" multiple accept="image/*">
            <span asp-validation-for="Upload"></span>
        </div>
        <button type="submit" class="home-admin-interface-button">Сохранить</button>
    </form>
</div>

<link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>

<script>
  const quill = new Quill('#editor', {
    theme: 'snow',
    modules: { toolbar: '#toolbar' }
  });

  const hidden = document.getElementById('descHidden');

  if (hidden && hidden.value) {
    quill.root.innerHTML = hidden.value;
  }

  document.getElementById('newsForm').addEventListener('submit', () => {
    hidden.value = quill.root.innerHTML;
  });
</script>
